# ä¸šåŠ¡ç¨³å®šæ€§ç›‘æ§ç³»ç»Ÿ - æŠ€æœ¯æ¶æ„æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- ç‰ˆæœ¬ï¼šv2.1.0
- åˆ›å»ºæ—¥æœŸï¼š2025-09-28
- æ›´æ–°æ—¥æœŸï¼š2025-09-28
- æ–‡æ¡£çŠ¶æ€ï¼šæœ€æ–°

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æŠ€æœ¯æ ˆé€‰å‹](#æŠ€æœ¯æ ˆé€‰å‹)
3. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
4. [æ•°æ®æµè®¾è®¡](#æ•°æ®æµè®¾è®¡)
5. [ç»„ä»¶æ¶æ„](#ç»„ä»¶æ¶æ„)
6. [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
7. [æ•°æ®å±‚è®¾è®¡](#æ•°æ®å±‚è®¾è®¡)
8. [æ„å»ºéƒ¨ç½²](#æ„å»ºéƒ¨ç½²)
9. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
10. [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)

## ç³»ç»Ÿæ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
ä¸šåŠ¡ç¨³å®šæ€§ç›‘æ§ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºReactçš„ä¼ä¸šçº§ä»ªè¡¨æ¿åº”ç”¨ï¼Œç”¨äºå®æ—¶ç›‘æ§æ”¿åºœå„éƒ¨é—¨çš„ITåŸºç¡€è®¾æ–½ã€ä¸šåŠ¡ç³»ç»Ÿå’Œèµ„äº§å¥åº·çŠ¶å†µã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œæä¾›ç›´è§‚çš„æ•°æ®å¯è§†åŒ–å’Œäº¤äº’ä½“éªŒã€‚

### æ ¸å¿ƒåŠŸèƒ½
- **å››çº§å±‚æ¬¡ç›‘æ§**ï¼šæ ¹èŠ‚ç‚¹ â†’ éƒ¨é—¨ â†’ ç³»ç»Ÿ â†’ èµ„äº§
- **å¤šç»´åº¦å±•ç¤º**ï¼šKPIæŒ‡æ ‡ã€å¥åº·çŸ©é˜µã€è¯¦æƒ…é¢æ¿ã€å‘Šè­¦ç›‘æ§
- **äº¤äº’å¼å¯¼èˆª**ï¼šç»„ç»‡æ ‘å¯¼èˆªã€çŸ©é˜µå›¾é’»å–ã€é¢åŒ…å±‘è¿”å›
- **å®æ—¶æ•°æ®**ï¼šåŠ¨æ€ç­›é€‰ã€çŠ¶æ€åŒæ­¥ã€å‘Šè­¦æ¨é€

## æŠ€æœ¯æ ˆé€‰å‹

### å‰ç«¯æ¡†æ¶
```
â”œâ”€â”€ React 18.2.0                    # ä¸»æ¡†æ¶
â”œâ”€â”€ TypeScript 5.x                  # ç±»å‹ç³»ç»Ÿ
â”œâ”€â”€ Vite 5.x                        # æ„å»ºå·¥å…·
â””â”€â”€ React Router 6.x                # è·¯ç”±ç®¡ç†
```

### UIç»„ä»¶åº“
```
â”œâ”€â”€ Ant Design 5.x                  # ä¸»è¦UIç»„ä»¶
â”œâ”€â”€ @ant-design/icons               # å›¾æ ‡åº“
â”œâ”€â”€ CSS Custom Properties           # æ ·å¼å˜é‡
â””â”€â”€ CSS Modules                     # æ ·å¼éš”ç¦»
```

### çŠ¶æ€ç®¡ç†
```
â”œâ”€â”€ Redux Toolkit 2.x               # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ React-Redux 9.x                 # Reactç»‘å®š
â”œâ”€â”€ Immer                           # ä¸å¯å˜æ•°æ®
â””â”€â”€ Redux DevTools                  # å¼€å‘è°ƒè¯•
```

### æ•°æ®å¯è§†åŒ–
```
â”œâ”€â”€ D3.js 7.x                       # æ ¸å¿ƒå¯è§†åŒ–åº“
â”œâ”€â”€ SVG                             # çŸ¢é‡å›¾å½¢
â”œâ”€â”€ Canvas (å¤‡é€‰)                    # é«˜æ€§èƒ½æ¸²æŸ“
â””â”€â”€ è‡ªå®šä¹‰ç®—æ³•                       # å¸ƒå±€è®¡ç®—
```

### å¼€å‘å·¥å…·
```
â”œâ”€â”€ ESLint                          # ä»£ç æ£€æŸ¥
â”œâ”€â”€ Prettier                        # ä»£ç æ ¼å¼åŒ–
â”œâ”€â”€ Husky                           # Gité’©å­
â”œâ”€â”€ dayjs                           # æ—¶é—´å¤„ç†
â””â”€â”€ Mock.js (å¯é€‰)                   # æ•°æ®æ¨¡æ‹Ÿ
```

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡ç¨³å®šæ€§ç›‘æ§ç³»ç»Ÿ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Presentation Layer (è¡¨ç°å±‚)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç»„ç»‡æ ‘å¯¼èˆª   â”‚ â”‚ å¥åº·çŸ©é˜µå›¾   â”‚ â”‚    ç³»ç»Ÿè¯¦æƒ…é¢æ¿     â”‚ â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚                     â”‚ â”‚
â”‚  â”‚OrganizationTâ”‚ â”‚HealthMatrix â”‚ â”‚   SystemDetail      â”‚ â”‚
â”‚  â”‚ree          â”‚ â”‚             â”‚ â”‚                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                KPIæŒ‡æ ‡å¡ç‰‡                          â”‚ â”‚
â”‚  â”‚                KPICards                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                å‘Šè­¦ç›‘æ§é¢æ¿                          â”‚ â”‚
â”‚  â”‚                AlertPanel                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State Management Layer (çŠ¶æ€ç®¡ç†å±‚)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                Redux Store                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚Dashboard    â”‚ â”‚Organization â”‚ â”‚    Assets       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚Slice        â”‚ â”‚  State      â”‚ â”‚    State        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer (æ•°æ®å±‚)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                Mock Data Service                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ç»„ç»‡æ¶æ„æ•°æ® â”‚ â”‚ ç³»ç»Ÿèµ„äº§æ•°æ® â”‚ â”‚   å‘Šè­¦æ¼æ´æ•°æ®   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—åˆ’åˆ†
```
src/
â”œâ”€â”€ pages/                          # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard/                  # ä¸»ä»ªè¡¨æ¿é¡µé¢
â”‚   â””â”€â”€ MockConfig/                 # Mocké…ç½®é¡µé¢
â”œâ”€â”€ components/                     # ä¸šåŠ¡ç»„ä»¶
â”‚   â””â”€â”€ dashboard/                  # ä»ªè¡¨æ¿ç›¸å…³ç»„ä»¶
â”‚       â”œâ”€â”€ OrganizationTree/       # ç»„ç»‡æ¶æ„æ ‘
â”‚       â”œâ”€â”€ KPICards/              # KPIæŒ‡æ ‡å¡ç‰‡
â”‚       â”œâ”€â”€ HealthMatrix/          # å¥åº·çŸ©é˜µå›¾
â”‚       â”œâ”€â”€ SystemDetail/          # ç³»ç»Ÿè¯¦æƒ…é¢æ¿
â”‚       â””â”€â”€ AlertPanel/            # å‘Šè­¦ç›‘æ§é¢æ¿
â”œâ”€â”€ store/                          # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ index.ts                   # Storeé…ç½®
â”‚   â””â”€â”€ slices/                    # Reduxåˆ‡ç‰‡
â”‚       â””â”€â”€ dashboardSlice.ts      # ä»ªè¡¨æ¿çŠ¶æ€
â”œâ”€â”€ mock/                          # æ¨¡æ‹Ÿæ•°æ®
â”‚   â””â”€â”€ data.ts                    # æ•°æ®ç”Ÿæˆå™¨
â”œâ”€â”€ types/                         # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts                   # å…¨å±€ç±»å‹
â””â”€â”€ utils/                         # å·¥å…·å‡½æ•°
    â”œâ”€â”€ constants.ts               # å¸¸é‡å®šä¹‰
    â””â”€â”€ helpers.ts                 # å¸®åŠ©å‡½æ•°
```

## æ•°æ®æµè®¾è®¡

### æ•°æ®æµå›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ç”¨æˆ·äº¤äº’    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ç”¨æˆ·æ“ä½œ  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚     ç»„ä»¶äº‹ä»¶     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   dispatch   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redux Store â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   Actionæ´¾å‘    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                â–²
       â”‚ subscribe                      â”‚
       â–¼                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   selector   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»„ä»¶é‡æ¸²æŸ“  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   çŠ¶æ€é€‰æ‹©å™¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ•°æ®æµ
1. **ç”¨æˆ·äº¤äº’**ï¼šç‚¹å‡»æ ‘èŠ‚ç‚¹ã€çŸ©é˜µå›¾ã€é¢åŒ…å±‘å¯¼èˆª
2. **äº‹ä»¶å¤„ç†**ï¼šç»„ä»¶å†…å¤„ç†ç‚¹å‡»äº‹ä»¶
3. **Actionæ´¾å‘**ï¼šdispatchç›¸åº”çš„Redux action
4. **çŠ¶æ€æ›´æ–°**ï¼šreducerå¤„ç†å¹¶æ›´æ–°storeçŠ¶æ€
5. **ç»„ä»¶é‡æ¸²æŸ“**ï¼šé€šè¿‡useSelectorç›‘å¬çŠ¶æ€å˜åŒ–
6. **ç•Œé¢åŒæ­¥**ï¼šæ‰€æœ‰ç›¸å…³ç»„ä»¶åŒæ­¥æ›´æ–°

### å…³é”®çŠ¶æ€å˜æ›´
```typescript
// æ ‘èŠ‚ç‚¹é€‰æ‹©æµç¨‹
handleNodeClick(node)
  â†“
dispatch(setSelectedOrganization(node))
  â†“
æ›´æ–°selectedOrganizationçŠ¶æ€
  â†“
è§¦å‘æ‰€æœ‰ä½¿ç”¨è¯¥çŠ¶æ€çš„ç»„ä»¶é‡æ¸²æŸ“
  â†“
KPICardsã€HealthMatrixã€SystemDetailã€AlertPanelåŒæ­¥æ›´æ–°
```

## ç»„ä»¶æ¶æ„

### ç»„ä»¶å±‚æ¬¡ç»“æ„
```
Dashboard (ä¸»é¡µé¢)
â”œâ”€â”€ KPICards (KPIæŒ‡æ ‡å¡ç‰‡)
â”œâ”€â”€ ä¸­é—´åŒºåŸŸ
â”‚   â”œâ”€â”€ OrganizationTree (ç»„ç»‡æ¶æ„æ ‘)
â”‚   â”œâ”€â”€ HealthMatrix (å¥åº·çŸ©é˜µå›¾)
â”‚   â””â”€â”€ SystemDetail (ç³»ç»Ÿè¯¦æƒ…é¢æ¿)
â””â”€â”€ AlertPanel (å‘Šè­¦ç›‘æ§é¢æ¿)
```

### æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 1. OrganizationTree ç»„ç»‡æ¶æ„æ ‘
```typescript
interface OrganizationTreeProps {
  // æ— å¤–éƒ¨propsï¼Œé€šè¿‡Reduxè·å–æ•°æ®
}

// å†…éƒ¨çŠ¶æ€ç®¡ç†
const OrganizationTree: React.FC = () => {
  const { organizations, selectedOrganization } = useSelector(...)

  // èŠ‚ç‚¹ç‚¹å‡»å¤„ç†
  const handleNodeClick = (node: OrganizationNode) => {
    dispatch(setSelectedOrganization(node))
    // æ ¹æ®èŠ‚ç‚¹ç±»å‹è®¾ç½®ä¸åŒçš„æ•°æ®
  }

  // å±•å¼€/æŠ˜å å¤„ç†
  const handleExpandClick = (node: OrganizationNode) => {
    // æ‡’åŠ è½½å­èŠ‚ç‚¹æ•°æ®
  }
}
```

#### 2. HealthMatrix å¥åº·çŸ©é˜µå›¾
```typescript
interface HealthMatrixProps {
  // æ— å¤–éƒ¨propsï¼Œé€šè¿‡Reduxè·å–æ•°æ®
}

// D3.jså¯è§†åŒ–ç»„ä»¶
const HealthMatrix: React.FC = () => {
  const svgRef = useRef<SVGSVGElement>(null)
  const { filteredAssets, selectedAssetId } = useSelector(...)

  useEffect(() => {
    // D3.jsæ¸²æŸ“é€»è¾‘
    const svg = d3.select(svgRef.current)

    // ç»˜åˆ¶çŸ©é˜µå’Œèœ‚çªå›¾
    renderMatrix(svg, filteredAssets)

    // è®¾ç½®äº¤äº’äº‹ä»¶
    svg.selectAll('.hexagon')
      .on('click', handleHexagonClick)
      .on('mouseover', showTooltip)
      .on('mouseout', hideTooltip)

    // æ¸…ç†å‡½æ•°
    return () => {
      svg.selectAll('*').remove()
    }
  }, [filteredAssets, selectedAssetId])
}
```

#### 3. SystemDetail ç³»ç»Ÿè¯¦æƒ…é¢æ¿
```typescript
interface SystemDetailProps {
  // æ— å¤–éƒ¨propsï¼Œé€šè¿‡Reduxè·å–æ•°æ®
}

// åŠ¨æ€å†…å®¹å±•ç¤ºç»„ä»¶
const SystemDetail: React.FC = () => {
  const { selectedOrganization, filteredAssets, selectedAssetId } = useSelector(...)

  // æ ¹æ®é€‰æ‹©çŠ¶æ€è®¡ç®—æ˜¾ç¤ºå†…å®¹
  const displayContent = useMemo(() => {
    if (selectedAssetId) return { type: 'assetDetail', data: asset }
    if (selectedOrganization?.type === 'root') return { type: 'systemsList', data: systems }
    if (selectedOrganization?.type === 'department') return { type: 'departmentSystems', data: departmentSystems }
    if (selectedOrganization?.type === 'system') return { type: 'systemDetail', data: systemDetail }
    return { type: 'empty', data: null }
  }, [selectedOrganization, filteredAssets, selectedAssetId])

  // æ¸²æŸ“ä¸åŒç±»å‹çš„å†…å®¹
  return (
    <div className="system-detail-container">
      {displayContent.type === 'systemsList' && renderSystemsList(displayContent.data)}
      {displayContent.type === 'departmentSystems' && renderDepartmentSystems(displayContent.data)}
      {displayContent.type === 'systemDetail' && renderSystemDetail(displayContent.data)}
      {displayContent.type === 'assetDetail' && renderAssetDetail(displayContent.data)}
    </div>
  )
}
```

#### 4. AlertPanel å‘Šè­¦ç›‘æ§é¢æ¿
```typescript
interface AlertPanelProps {
  // æ— å¤–éƒ¨propsï¼Œé€šè¿‡Reduxè·å–æ•°æ®
}

// å‘Šè­¦ç›‘æ§ç»„ä»¶
const AlertPanel: React.FC = () => {
  const { selectedOrganization, filteredAssets } = useSelector(...)
  const [items, setItems] = useState<AlertPanelItem[]>([])

  // æ ¹æ®é€‰æ‹©èŒƒå›´åŠ è½½å‘Šè­¦æ•°æ®
  useEffect(() => {
    loadData()
  }, [selectedOrganization, filteredAssets])

  // æŒ‰ç±»å‹åˆ†ç»„å‘Šè­¦
  const groupedItems = useMemo(() => ({
    runtime: items.filter(item => item.type === 'RUNTIME'),
    vulnerability: items.filter(item => item.type === 'VULNERABILITY'),
    security: items.filter(item => item.type === 'SECURITY')
  }), [items])
}
```

## çŠ¶æ€ç®¡ç†

### Redux Storeç»“æ„
```typescript
interface RootState {
  dashboard: DashboardState
}

interface DashboardState {
  // é€‰æ‹©çŠ¶æ€
  selectedOrganization: OrganizationNode | null
  selectedDepartmentId: string | null
  selectedAssetId: string | null

  // æ•°æ®çŠ¶æ€
  organizations: OrganizationNode[]
  systems: BusinessSystem[]
  filteredAssets: Asset[]
  metrics: DashboardMetrics | null
  alerts: Alert[]
  vulnerabilities: Vulnerability[]

  // UIçŠ¶æ€
  filters: FilterOptions
  loading: boolean
  error: string | null
}
```

### Actionè®¾è®¡
```typescript
// é€‰æ‹©ç›¸å…³Actions
setSelectedOrganization(organization: OrganizationNode)
setSelectedDepartmentId(departmentId: string | null)
setSelectedAssetId(assetId: string | null)

// æ•°æ®ç›¸å…³Actions
setOrganizations(organizations: OrganizationNode[])
setSystems(systems: BusinessSystem[])
setFilteredAssets(assets: Asset[])
setMetrics(metrics: DashboardMetrics)
setAlerts(alerts: Alert[])
setVulnerabilities(vulnerabilities: Vulnerability[])

// æ ‘çŠ¶æ€ç®¡ç†Actions
toggleOrganizationExpand(nodeId: string)
expandOrganizationNode(payload: { nodeId: string, children: OrganizationNode[] })

// UIçŠ¶æ€Actions
setFilters(filters: FilterOptions)
setLoading(loading: boolean)
setError(error: string | null)
```

### çŠ¶æ€æ›´æ–°æ¨¡å¼
```typescript
// 1. åŒæ­¥æ›´æ–°æ¨¡å¼
const handleNodeClick = (node: OrganizationNode) => {
  dispatch(setSelectedOrganization(node))

  if (node.type === 'department') {
    const departmentSystems = allSystems.filter(sys => sys.departmentId === node.id)
    dispatch(setSystems(departmentSystems))
    dispatch(setFilteredAssets(getAssetsForDepartment(node.id)))
    dispatch(setSelectedDepartmentId(node.id))
    dispatch(setSelectedAssetId(null)) // æ¸…é™¤èµ„äº§é€‰æ‹©
  }
}

// 2. æ¡ä»¶æ›´æ–°æ¨¡å¼
const handleHexagonClick = (asset: Asset) => {
  if (selectedOrganization?.type === 'system') {
    dispatch(setSelectedAssetId(asset.id))
    // ä¸æ”¹å˜å…¶ä»–çŠ¶æ€ï¼Œä¿æŒç³»ç»Ÿçº§åˆ«çš„ä¸Šä¸‹æ–‡
  }
}
```

## æ•°æ®å±‚è®¾è®¡

### Mockæ•°æ®æ¶æ„
```typescript
// ç¡®å®šæ€§éšæœºç®—æ³•
const generateDeterministicData = (seed: string, count: number) => {
  const hash = generateHash(seed)
  const result = []

  for (let i = 0; i < count; i++) {
    const itemSeed = Math.abs(hash + i * 1234567) % 1000000
    result.push(generateItem(itemSeed))
  }

  return result
}

// åˆ†å±‚æ•°æ®ç”Ÿæˆ
â”œâ”€â”€ generateMockOrganizations()     # ç»„ç»‡æ¶æ„æ•°æ®
â”œâ”€â”€ generateMockSystems()           # ä¸šåŠ¡ç³»ç»Ÿæ•°æ®
â”œâ”€â”€ generateAssetsForSystem()       # ç³»ç»Ÿèµ„äº§æ•°æ®
â”œâ”€â”€ generateMockAlerts()            # å‘Šè­¦æ•°æ®
â”œâ”€â”€ generateMockVulnerabilities()   # æ¼æ´æ•°æ®
â””â”€â”€ generateMockMetrics()           # KPIæŒ‡æ ‡æ•°æ®
```

### æ•°æ®å…³è”å…³ç³»
```
ç»„ç»‡æ¶æ„ (Organizations)
â”œâ”€â”€ id, name, type, children
â”œâ”€â”€ systemCount, assetCount
â””â”€â”€ healthStatus

ä¸šåŠ¡ç³»ç»Ÿ (BusinessSystems)
â”œâ”€â”€ id, name, departmentId
â”œâ”€â”€ assets[], assetCount
â”œâ”€â”€ alertCount, vulnerabilityCount
â””â”€â”€ healthStatus, metrics

èµ„äº§ä¿¡æ¯ (Assets)
â”œâ”€â”€ id, name, type, systemId
â”œâ”€â”€ healthStatus, importance
â”œâ”€â”€ ipAddress, description
â””â”€â”€ metrics, lastCheck

å‘Šè­¦æ•°æ® (Alerts)
â”œâ”€â”€ id, systemId, level, type
â”œâ”€â”€ title, description, status
â””â”€â”€ timestamp, impact

æ¼æ´æ•°æ® (Vulnerabilities)
â”œâ”€â”€ id, cveId, systemId
â”œâ”€â”€ severity, cvssScore
â”œâ”€â”€ title, description, status
â””â”€â”€ discoveryDate, fixRecommendation
```

## æ„å»ºéƒ¨ç½²

### æ„å»ºé…ç½®
```typescript
// vite.config.ts
export default defineConfig({
  plugins: [react()],
  build: {
    target: 'es2020',
    minify: 'terser',
    sourcemap: true,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          redux: ['@reduxjs/toolkit', 'react-redux'],
          antd: ['antd', '@ant-design/icons'],
          d3: ['d3']
        }
      }
    }
  },
  server: {
    port: 3000,
    host: true
  }
})
```

### éƒ¨ç½²ç­–ç•¥
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨

# ç”Ÿäº§æ„å»º
npm run build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview      # é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

# éƒ¨ç½²æµç¨‹
1. ä»£ç æäº¤åˆ°Gitä»“åº“
2. CI/CDæµæ°´çº¿è‡ªåŠ¨æ„å»º
3. æ„å»ºäº§ç‰©éƒ¨ç½²åˆ°CDN
4. é…ç½®Nginxåå‘ä»£ç†
5. ç›‘æ§éƒ¨ç½²çŠ¶æ€
```

### ç¯å¢ƒé…ç½®
```typescript
// ç¯å¢ƒå˜é‡
VITE_API_BASE_URL=     # APIåŸºç¡€URL
VITE_ENV=              # ç¯å¢ƒæ ‡è¯†
VITE_ENABLE_MOCK=      # æ˜¯å¦å¯ç”¨Mockæ•°æ®

// é…ç½®æ–‡ä»¶
â”œâ”€â”€ .env                # é»˜è®¤é…ç½®
â”œâ”€â”€ .env.development    # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ .env.production     # ç”Ÿäº§ç¯å¢ƒ
â””â”€â”€ .env.local          # æœ¬åœ°é…ç½®
```

## æ€§èƒ½ä¼˜åŒ–

### æ¸²æŸ“ä¼˜åŒ–
```typescript
// 1. ç»„ä»¶è®°å¿†åŒ–
const MemoizedComponent = React.memo(Component, (prevProps, nextProps) => {
  return shallowEqual(prevProps, nextProps)
})

// 2. çŠ¶æ€é€‰æ‹©å™¨ä¼˜åŒ–
const selectedData = useSelector(state => ({
  organization: state.dashboard.selectedOrganization,
  assets: state.dashboard.filteredAssets
}), shallowEqual)

// 3. useMemoç¼“å­˜è®¡ç®—
const displayContent = useMemo(() => {
  return computeDisplayContent(selectedOrganization, filteredAssets)
}, [selectedOrganization, filteredAssets])

// 4. useCallbackç¼“å­˜å‡½æ•°
const handleNodeClick = useCallback((node: OrganizationNode) => {
  dispatch(setSelectedOrganization(node))
}, [dispatch])
```

### D3.jsæ€§èƒ½ä¼˜åŒ–
```typescript
// 1. æ•°æ®ç»‘å®šä¼˜åŒ–
const update = svg.selectAll('.hexagon')
  .data(data, d => d.id) // ä½¿ç”¨keyå‡½æ•°

update.enter()
  .append('path')
  .attr('class', 'hexagon')
  .merge(update) // åˆå¹¶enterå’Œupdateé€‰æ‹©é›†
  .attr('d', hexagonPath)
  .attr('fill', d => colorScale(d.healthStatus))

update.exit().remove() // ç§»é™¤å¤šä½™å…ƒç´ 

// 2. äº‹ä»¶å§”æ‰˜
svg.on('click', function(event) {
  const target = event.target
  if (target.classList.contains('hexagon')) {
    handleHexagonClick(d3.select(target).datum())
  }
})

// 3. è™šæ‹ŸåŒ–æ¸²æŸ“
if (data.length > 1000) {
  // åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„å…ƒç´ 
  const visibleData = getVisibleData(data, viewport)
  renderHexagons(visibleData)
}
```

### èµ„æºä¼˜åŒ–
```typescript
// 1. ä»£ç åˆ†å‰²
const MockConfig = lazy(() => import('./pages/MockConfig'))

// 2. èµ„æºé¢„åŠ è½½
<link rel="preload" href="/assets/fonts/inter.woff2" as="font" type="font/woff2" crossorigin>

// 3. å›¾ç‰‡ä¼˜åŒ–
// ä½¿ç”¨WebPæ ¼å¼
// å‹ç¼©SVGå›¾æ ‡
// åˆç†è®¾ç½®å›¾ç‰‡å°ºå¯¸

// 4. ç¼“å­˜ç­–ç•¥
// è®¾ç½®é™æ€èµ„æºç¼“å­˜å¤´
// ä½¿ç”¨Service Workerç¼“å­˜
// å®ç°æ¥å£æ•°æ®ç¼“å­˜
```

## å®‰å…¨è€ƒè™‘

### å‰ç«¯å®‰å…¨
```typescript
// 1. XSSé˜²æŠ¤
const SafeHTML = ({ content }: { content: string }) => {
  const sanitized = DOMPurify.sanitize(content)
  return <div dangerouslySetInnerHTML={{ __html: sanitized }} />
}

// 2. CSRFé˜²æŠ¤
axios.defaults.xsrfCookieName = 'XSRF-TOKEN'
axios.defaults.xsrfHeaderName = 'X-XSRF-TOKEN'

// 3. æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
// ä¸åœ¨å‰ç«¯å­˜å‚¨æ•æ„Ÿæ•°æ®
// ä½¿ç”¨HTTPSä¼ è¾“
// è®¾ç½®å®‰å…¨å“åº”å¤´

// 4. è¾“å…¥éªŒè¯
const validateInput = (input: string) => {
  // é•¿åº¦é™åˆ¶
  if (input.length > 1000) return false

  // ç‰¹æ®Šå­—ç¬¦è¿‡æ»¤
  const dangerousChars = /<script|javascript:|data:/i
  if (dangerousChars.test(input)) return false

  return true
}
```

### æ•°æ®å®‰å…¨
```typescript
// 1. æ¥å£æƒé™æ§åˆ¶
const apiClient = axios.create({
  baseURL: process.env.VITE_API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// 2. é”™è¯¯ä¿¡æ¯è„±æ•
const handleError = (error: any) => {
  console.error('API Error:', error) // å¼€å‘ç¯å¢ƒè®°å½•è¯¦ç»†é”™è¯¯

  // ç”Ÿäº§ç¯å¢ƒè¿”å›é€šç”¨é”™è¯¯ä¿¡æ¯
  if (process.env.NODE_ENV === 'production') {
    return 'ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•'
  }

  return error.message
}

// 3. æ—¥å¿—å®‰å…¨
const logger = {
  info: (message: string, data?: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.log(message, data)
    }
    // ç”Ÿäº§ç¯å¢ƒå‘é€åˆ°æ—¥å¿—æœåŠ¡
  },

  error: (message: string, error?: any) => {
    // è®°å½•é”™è¯¯ä½†ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯
    const safeError = {
      message: error?.message,
      stack: process.env.NODE_ENV === 'development' ? error?.stack : undefined
    }
    console.error(message, safeError)
  }
}
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£
- [åŠŸèƒ½æ›´æ–°æ–‡æ¡£](./åŠŸèƒ½æ›´æ–°æ–‡æ¡£.md)
- [UI-UXè®¾è®¡è§„èŒƒ](./UI-UXè®¾è®¡è§„èŒƒ.md)
- [æ¥å£è§„èŒƒæ–‡æ¡£](./æ¥å£è§„èŒƒæ–‡æ¡£.md)
- [äº§å“éœ€æ±‚æ–‡æ¡£PRD](./äº§å“éœ€æ±‚æ–‡æ¡£PRD.md)
- [å¼€å‘æŒ‡å—](../CLAUDE.md)

---

**æ–‡æ¡£ç»´æŠ¤**: è¯·åœ¨ç³»ç»ŸåŠŸèƒ½æˆ–æ¶æ„å‘ç”Ÿå˜åŒ–æ—¶åŠæ—¶æ›´æ–°æœ¬æ–‡æ¡£