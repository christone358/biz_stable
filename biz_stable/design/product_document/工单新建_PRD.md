# 产品需求文档（PRD）— 工单新建（桌面端）

文档信息
- 文档版本：v1.0
- 适用端：桌面端（不含移动端）
- 面向读者：研发人员（前端、后端、测试、产品/交互）
- 非范围：接口细节、流程编排、移动端适配

---

## 一、背景与目标
- 背景：在“业务协同管理系统”的任务中心，用户需要新建并发起协同类工单（如安全加固、应急处置）。
- 目标：
  - 信息结构清晰：信息分为“事项概要 → 任务明细 → 附件”。
  - 类型差异化：任务明细随“任务类型”切换展示不同字段与列表。
  - 校验明确：提交前进行就地校验，错误字段快速定位。

---

## 二、入口与路由
- 入口：任务中心筛选行右侧的“新建工单”按钮。
- 流程：点击按钮 → 弹窗选择任务类型（安全加固/应急处置）→ 新标签页打开新建页。
- 路由：/collaboration/tickets/new?type=<security_hardening|emergency_response>
- 类型切换：新建页内不提供类型切换控件，仅展示当前选择的任务类型（以 Tag 呈现）。

---

## 三、页面结构
- 顶部 Summary Bar：
  - 标题：新建工单
  - 任务类型：以 Tag 显示当前类型（安全加固=蓝色，应急处置=橙色）；仅展示不切换。
- 主体卡片（信息区）：
  1) 事项概要
  2) 任务明细（随任务类型变化）
  3) 附件
- 底部动作区：提交

---

## 四、字段与校验

### 4.1 事项概要（固定区）
- 所属系统-一级系统（必填）：下拉单选；示例值：政务服务平台/人口管理平台。
- 所属系统-二级系统（可选）：下拉单选；示例值：网络安全服务/基础支撑；与一级不强关联。

### 4.2 任务明细（动态区）

A) 安全加固（security_hardening）
- 漏洞信息列表（表格，可增删行；至少 0 行，提交不强制必须有行）：
  - 漏洞ID（必填，文本）：示例“CVE-XXXX-YYYY”。
  - 漏洞类型（必填，文本）：示例“SQL注入/弱口令/配置风险…”。
  - 漏洞等级（必填，枚举）：高/中/低。
  - 发现时间（必填，日期时间）：支持选择具体时间。
  - 漏洞描述（必填，文本域，单行高度）：简要描述漏洞细节。
- 修复计划（表单栅格，2 列优先）：
  - 处置负责人（必填，文本）
  - 计划完成时间（必填，日期时间）
  - 加固策略（必填，文本域）
  - 是否需要变更窗口（必填，枚举）：是/否
  - 影响业务系统（可选，文本）
  - 影响范围描述（可选，文本域）
  - 备注（可选，文本域）

B) 应急处置（emergency_response）
- 应急事件通报列表（表格，可增删行；至少 0 行）：
  - 事件发生时间（必填，日期时间）
  - 事件类型描述（必填，文本）：示例“服务中断/异常登录…”。
  - 事件影响描述（必填，文本域，单行高度）：对业务影响范围与程度。
- 人员与时间信息（表单栅格）：
  - 安全工程师姓名（必填，文本）
  - 安全工程师电话（必填，文本）
  - 应急处置提出时间（必填，日期时间）
  - 应急处置完成要求时间（必填，日期时间）

### 4.3 附件
- 能力：上传（多文件）；显示文件名列表。
- 说明：当前版本仅提供上传，不含在线预览/下载（由详情页承载）。

---

## 五、交互与校验规则
- 表格行：支持“新增/删除”；行内必填项缺失时，提交校验会定位到对应行与字段。
- 表单校验：
  - 提交前统一进行强校验；错误在字段下方红色提示。
  - 事项概要与任务明细的必填规则以字段描述为准。
- 提交：点击“提交”后校验通过即提示“工单已提交创建”。
- 草稿：不支持保存草稿。

---

## 六、非功能与验收
- 非功能：
  - 性能：动态表格 50 行以内保持流畅；表单响应无明显卡顿。
  - 可访问性：键盘可达；控件聚焦明显。
- 验收要点：
  - 入口与路由正确：从任务中心新建 → 选择类型 → 新建页 Tag 显示正确类型。
  - 信息结构一致：按“事项概要 → 任务明细 → 附件”顺序呈现。
  - 各类型字段与校验与页面实现一致；提交有成功提示。

---

## 七、边界与不做
- 不支持：类型在新建页中切换；批量导入；附件在线预览/下载；移动端适配。

