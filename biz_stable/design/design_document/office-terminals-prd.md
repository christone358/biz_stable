# 办公终端管理 | 产品设计说明文档（PRD）

面向读者：产品经理、研发工程师（前端/后端/测试）

文档目的：明确办公终端管理模块的业务目标、页面信息结构、关键展示与操作逻辑、业务规则、数据模型映射、输入输出约束，指导研发实现与自测。

---

## 1. 业务说明（Scope）
- 目标：为企业提供办公终端（PC/笔记本/工控等）的统一台账与安全态势视图，支持资产概览、检索筛选、风险/防护判断，以及详情页的静态与安全信息查阅。
- 不在本期范围：端管平台集成、自动准入/隔离策略、接口细节（本 PRD 不包含接口定义）。

名词约定
- 风险：由“未处理告警数、漏洞（高危）”聚合出的等级（正常/中/高）。
- 防护：EDR/安全代理 安装与在线状态（未防护/离线/防护中）。
- 运行状态：终端在线性（示例：Active/Inactive/Unknown），与云主机 RUNNING/STOPPED/UNKNOWN 概念对齐。

---

## 2. 页面信息结构设计

### 2.1 列表页（List）
- 顶部统计 Token（自适应宽度，不铺满一行）：
  - 终端统计：总量N（大号） + 右侧并列细分（运行中/停止/未知）。
  - 主机风险：风险总数R（=高+中） + 右侧并列（高/中/正常）。
  - 防护覆盖率：左侧显示 P%（覆盖率），右侧“未安装 M”。
  - 右上角操作：新建终端 / 导入台账 / 导出台账（仅此一处，不重复）。
- 列表标题行右上角工具：
  - CheckableTag 筛选组（互斥单选，可清空）：
    - 主机风险：正常 / 中 / 高
    - 主机运行状态：运行中 / 已停止 / 未知
    - 防护状态：防护中 / 离线 / 未防护
  - 一键式搜索框：支持“名称 / IP / 用户 / 资产 / 标签”。
- 卡片栅格：6 列、min-height 160、gap 16；卡片信息结构：
  - 主信息：设备名称（省略号）
  - IP + 运行色点（绿=运行、灰=停止、橙=未知）
  - 结论栈：左侧“主机风险”三格进度，右侧“防护状态”图标（hover 说明）。
  - 基本情况行：来源（华为云/云轴/私有云） · 规格（CPU/内存/磁盘） · 用户/责任人
  - 标签行（贴底）：二级系统/OS/部门等（单行省略）。

### 2.2 详情页（Detail）
- 顶部结论条：名称 · IP · 运行色点 · 主机风险（进度格）· 防护状态（图标）。
- 左侧“静态信息”：身份（名称/序列号）/网络（IP/MAC/网段）/硬件（CPU/内存/磁盘）/OS（类型/版本）/组织（部门/责任人）。
- 右侧“安全状态”：风险说明（告警/高危漏洞）、防护状态（在线/离线/未安装）、最近在线/心跳、告警与漏洞汇总、最近事件时间线（无则空态）。

---

## 3. 关键展示与操作逻辑

展示逻辑与操作逻辑与云主机一致：
- 运行状态色点贴靠 IP；风险三格进度、EDR 图标 hover 说明，缺数据不展示。
- 列表统计右上角合并操作（新建/导入/导出）；标题右上角三组筛选 + 搜索；卡片点击进详情，可键盘触发。

---

## 4. 业务逻辑说明

风险分级
- 高：高危漏洞数 > 0 或 未处理告警数 ≥ 3。
- 中：未处理告警数 ∈ [1,2] 且高危漏洞数 = 0。
- 正常：其余情况。

防护判定
- 未防护：agentInstalled = false。
- 离线：agentInstalled = true 且 agentOnline = false。
- 防护中：agentInstalled = true 且 agentOnline = true。

来源显示
- 优先 dataSource.provider；缺失时回退 vendor；取值限定为：华为云、云轴、私有云。

---

## 5. 数据模型映射说明（建议）

最小字段集合（用于列表与统计）
- 基本标识：id, deviceName, ipAddress
- 运行：status/powerStatus ∈ {RUNNING(Active), STOPPED(Inactive), UNKNOWN}
- 防护：agentInstalled: boolean, agentOnline: boolean
- 风险：pendingAlerts: number, vulnerabilities: number
- 规格：cpu: number, memory: number, disk: number
- 来源：dataSource.provider 或 vendor
- 业务/组织/用户：businessSystem, department, ownerName（或 systemOwner）
- OS：osType, osVersion（用于标签与详情）

（最终以 office-terminals 类型定义为准；若复用云主机字段命名，需在实现阶段统一域模型）

---

## 6. 输入/输出与约束

输入（UI 层）
- 搜索：自由文本（匹配 deviceName/ipAddress/ownerName/businessAssetName）。
- 筛选：主机风险 / 主机运行状态 / 防护状态（互斥单选，可清空）。

输出（UI 层）
- 顶部统计：总量/运行细分/风险细分/覆盖率与未安装。
- 列表：按筛选+搜索输出卡片，6 列栅格；点击进入详情。

约束与边界
- 超长文本省略，提供 title 提示；缺失字段不占位。
- 颜色与 icon 一致映射；避免同屏重复解释性文本。
- 性能建议：分页或按需加载。

---

## 7. 验收标准（DoD）
- 顶部三项统计 Token 正确计算与布局；右上角操作按钮合并。
- 列表标题右上角三组筛选（CheckableTag）+ 搜索同行展示，不换行；未选中态对比良好。
- 卡片 6 列；IP 右侧运行色点；风险三格进度；防护图标；标签贴底无空白。
- 详情页：左静态/右安全；结论条展示运行/风险/防护，hover 说明完整。

---

## 8. 信息模型（终端）

说明：本节为“办公终端信息模型”的当前设计，遵循“设备静态信息、使用人信息、安全态势、纳管/准入与当前运行状态”的最小完备原则；不纳入外设/镜像/电池/连接环境/物理位置/历史领用/软件清单/合规加固/生命周期/资产关系等内容。字段来源参考 docs/asset-ldm.xlsx 的“基础设施-终端”工作表（已纳入）。

8.1 分组与字段清单（当前口径）
- 终端标识与分类（必选）
  - 终端ID（唯一标识，字符串）
  - 终端PC名称（设备/主机名，字符串，必填）
  - 终端类型（枚举：台式机/笔记本/服务器/其他，必填）
  - 操作系统家族（枚举：Windows/macOS/Linux/其他，必填）
  - 资产编号（资产号/标签，字符串，可选）
- 硬件与厂商（可选，按可采集填）
  - 设备序列号（SN，字符串，建议）
  - 设备厂商（字符串）
  - 设备型号（字符串）
  - 是否国产（枚举：是/否）
  - 设备出厂时间（日期字符串）
- 操作系统（必选）
  - 操作系统类型（与家族一致或更细，枚举，必填）
  - 操作系统版本（字符串，必填）
  - 系统安装时间（日期字符串）
- 网络地址（必选）
  - IP地址（IPv4/IPv6，至少一项必填）
  - MAC地址（至少一项必填）
  - 所属网段（字符串，可选）
- 使用人与组织（必选）
  - 当前使用人：登录账号（字符串，建议）
  - 当前使用人：姓名（字符串，必填）
  - 所属组织/部门（字符串或路径，必填）
  - 联系方式：手机号/邮箱（可选）
- 纳管与准入（以“准入管理”为准）
  - 注册/审核状态（枚举：待注册/审核中/审核通过/驳回/注销，至少保留原始“准入状态”值）
  - 信息来源（枚举：EDR/NAC/AD/MDM/人工）
  - EDR客户端类型（枚举，见 8.4）
  - EDR客户端版本（字符串，可选）
  - EDR引擎版本（字符串，可选）
  - NAC注册时间（日期时间，可选）
  - EDR首次发现时间（日期时间，可选）
  - EDR卸载时间（日期时间，可选）
- 安全状态（必选）
  - 保护状态（受保护/未保护/未知）
  - 阻断状态（阻断/未阻断/未知）
  - 锁定状态（锁定/未锁定/未知）
  - 有效状态（有效/无效）
  - （由“终端安全软件”聚合计算，摘要不单列）
- 运行状态（必选）
  - 运行状态（枚举：运行中/已关机/未知，必填）
  - 最后活跃时间（日期时间，必填）
 - 终端安全软件（多值，可选）
   - 每个安全软件一条记录：类别/厂商/产品/版本/引擎/病毒库/实时防护/在线状态/安装与更新时间/启用状态/是否主防护/来源
 

8.2 与 docs/asset-ldm.xlsx 对照（已纳入）
- 基础信息/基本信息：
  - 终端PC名称、终端类型、资产编号、设备序列号、IP地址、mac地址、描述 → 覆盖于“标识与分类/网络地址/硬件与厂商”。
- 基础信息/厂商信息：
  - 设备型号、是否国产、设备厂商、设备出厂时间 → 覆盖于“硬件与厂商”。
- 基础信息/操作系统：
  - 操作系统类型、操作系统版本、系统安装时间 → 覆盖于“操作系统”。
- 管理信息/终端使用人：
  - 姓名、手机号、邮箱、所属组织/部门 → 覆盖于“使用人与组织”。
- 管理信息/准入信息：
  - 注册时间、卸载时间、准入状态 → 覆盖于“纳管与准入”。
- 部署位置/准入信息：
  - 所属网段 → 覆盖于“网络地址/所属网段”（可选）。
- 安全信息/防护信息：
  - 安全防护措施（厂商、名称、病毒库版本、是否配置安全基线…）→ 拆解为“杀毒/EDR 客户端信息 + 病毒库版本”；“是否配置安全基线”暂不纳入必填（可选）。
- 安全信息/安全状态：
  - 是否被管控（及具体管控措施）→ 覆盖于“安全状态”（可将“管控措施”保留为备注）。
 
- 运行信息/运行信息：
  - 运行状态、最后活跃时间 → 覆盖于“运行状态”。

注：新版 LDM 未包含 CPU/内存/硬盘 等硬件规格字段，PRD 亦不将其设为必填；如从样例数据可获取，可作为“可选扩展字段”纳入实现。

8.3 最小必填集合（用于一致的列表/详情展示）
- 终端ID、终端PC名称、终端类型、操作系统类型
- IP地址或 MAC 地址（至少一项）
- 使用人姓名、所属组织/部门（登录账号如可得则同时存储）
- 运行状态、最后活跃时间
- 准入/注册状态（若集成准入/NAC）

8.4 枚举与字典（建议口径）
- 终端类型：台式机/笔记本/服务器/其他（可扩展）
- 操作系统家族：Windows/macOS/Linux/其他
- 运行状态：运行中/已关机/未知
- 是否国产：是/否
- 准入状态（示例）：待注册/审核中/审核通过/驳回/注销（若现场口径不同，可用字典映射保留原值）
- 信息来源：EDR/NAC/AD/MDM/人工
- 保护/阻断/锁定/有效：受保护|未保护|未知 / 阻断|未阻断|未知 / 锁定|未锁定|未知 / 有效|无效
 - EDR客户端类型（政务场景建议）：Windows桌面终端/Windows服务器终端/macOS终端/Linux桌面终端/VDI虚拟桌面/瘦终端（云终端）/其他
 - 安全软件类别：EDR/AV/主机防火墙/DLP/加固/补丁管理/其他
 - 安全软件在线状态：在线/离线/不适用/未知
 - 实时防护：启用/未启用/未知

8.5 字段来源与更新策略
- 字段级“获取方式/来源”沿用 LDM 的“获取方式”口径，存入字段元数据；
- 冲突裁决：优先级（EDR/NAC > AD/MDM > 人工），最近更新时间优先；
- 缺失字段不影响入库，但在 UI 层不展示或以“未知”呈现；
- 个人信息字段（姓名/手机号/邮箱）按角色做授权与脱敏处理。

8.6 不纳入本期（范围排除）
- 外设信息、镜像/基线、电池、连接环境（Wi‑Fi/AP）与物理位置；
- 历史领用、软件清单、合规与加固（磁盘加密/TPM/补丁）、生命周期与资产关系；
- 运行指标时序与会话信息。

8.7 字段字典（类型/必填/来源/枚举）
默认来源优先级：EDR/NAC > AD/MDM > 人工。以下“必填”为本产品最小集要求；若现场以客户 LDM 为准，可在实现期按需上调必填级别（以注释说明）。

8.7.1 终端标识与分类
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 终端ID | string | 是 | 平台生成/ID映射 | - |
| 终端PC名称 | string | 是 | EDR/AD/人工 | - |
| 终端类型 | enum[string] | 是 | LDM/EDR/人工 | 台式机/笔记本/服务器/其他 |
| 操作系统家族 | enum[string] | 是 | EDR/MDM/AD | Windows/macOS/Linux/其他 |
| 资产编号 | string | 否 | 资产系统/人工 | - |

8.7.2 硬件与厂商
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 设备序列号（SN） | string | 否 | EDR/MDM/人工 | - |
| 设备厂商 | string | 否 | EDR/MDM/人工 | - |
| 设备型号 | string | 否 | EDR/MDM/人工 | - |
| 是否国产 | enum[string] | 否 | 资产系统/人工 | 是/否 |
| 设备出厂时间 | date | 否 | 资产系统/人工 | - |
注：客户 LDM 将“设备序列号/是否国产/设备出厂时间”标为必填；本期按可选处理，现场可上调为必填。

8.7.3 操作系统
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 操作系统类型 | enum[string] | 是 | EDR/MDM/AD | Windows/macOS/Linux/其他 |
| 操作系统版本 | string | 是 | EDR/MDM/AD | - |
| 系统安装时间 | datetime | 否 | EDR/MDM | - |

8.7.4 网络地址
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| IP地址 | string | 条件 | EDR/NAC | IPv4/IPv6（与 MAC 至少一项必填） |
| MAC地址 | string | 条件 | EDR/NAC | 与 IP 至少一项必填 |
| 所属网段 | string | 否 | NAC/人工 | - |

8.7.5 使用人与组织
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 登录账号 | string | 否 | AD/EDR | - |
| 姓名 | string | 是 | AD/EDR/人工 | - |
| 所属组织/部门 | string | 是 | AD/资产系统/人工 | - |
| 手机号 | string | 否 | 资产系统/人工 | - |
| 邮箱 | string | 否 | AD/资产系统/人工 | - |

8.7.6 纳管与准入（以准入管理为准）
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 注册/审核状态 | enum[string] | 条件 | NAC | 待注册/审核中/审核通过/驳回/注销（现场可映射） |
| 信息来源 | enum[string] | 否 | 系统生成 | EDR/NAC/AD/MDM/人工 |
| EDR客户端类型 | enum[string] | 否 | EDR | Windows桌面终端/Windows服务器终端/macOS终端/Linux桌面终端/VDI虚拟桌面/瘦终端（云终端）/其他 |
| EDR客户端版本 | string | 否 | EDR | - |
| EDR引擎版本 | string | 否 | EDR | - |
| NAC注册时间 | datetime | 否 | NAC | - |
| EDR首次发现时间 | datetime | 否 | EDR | - |
| EDR卸载时间 | datetime | 否 | EDR | - |

8.7.7 安全状态
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 保护状态 | enum[string] | 视集成 | EDR/AV | 受保护/未保护/未知 |
| 阻断状态 | enum[string] | 视集成 | NAC/EDR | 阻断/未阻断/未知 |
| 阻断时间 | datetime | 否 | NAC | - |
| 锁定状态 | enum[string] | 否 | EDR/AV | 锁定/未锁定/未知 |
| 有效状态 | enum[string] | 否 | EDR/AV | 有效/无效 |
| 被管控说明（备注） | string | 否 | NAC/人工 | - |

8.7.8 运行状态
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 运行状态 | enum[string] | 是 | EDR/NAC | 运行中/已关机/未知 |
| 最后活跃时间 | datetime | 是 | EDR/NAC | - |

8.7.9 终端安全软件（多值）
| 字段 | 类型 | 必填 | 来源建议 | 枚举/字典 |
| - | - | - | - | - |
| 安全软件类别 | enum[string] | 是 | EDR/AV | EDR/AV/主机防火墙/DLP/加固/补丁管理/其他 |
| 厂商 | string | 否 | EDR/AV | - |
| 产品名称 | string | 是 | EDR/AV | 例：Microsoft Defender、360安全卫士、火绒等 |
| 客户端版本 | string | 否 | EDR/AV | - |
| 引擎版本 | string | 否 | EDR/AV | - |
| 病毒库版本 | string | 否 | AV | - |
| 实时防护 | enum[string] | 否 | AV | 启用/未启用/未知 |
| 在线状态 | enum[string] | 否 | EDR | 在线/离线/不适用/未知 |
| 安装时间 | datetime | 否 | EDR/AV | - |
| 最近更新时间 | datetime | 否 | EDR/AV | - |
| 启用状态 | enum[string] | 否 | EDR/AV | 启用/禁用/未知 |
| 是否主防护 | boolean | 否 | 系统计算/人工 | true/false |
| 来源 | enum[string] | 否 | 系统生成 | EDR/AV/人工 |
| 卸载时间 | datetime | 否 | EDR/AV | - |

---

## 9. 分组与分类设计

目标：提供“管理分组（按组织归属）”与“设备分类（OS家族×设备类型）”两套能力，分开设计、独立呈现：分组用于按组织树展示与下钻；分类用于按 OS/设备类型维度统计与筛选。

9.1 概念
- 管理分组（Group）：组织视角。按组织树（单位/部门/科室…）进行展示与下钻，与“设备分类”解耦。
- 设备分类（Category/Taxonomy）：画像视角。基于终端字段派生的分类路径，用于统计、筛选与导航（OS → 设备类型）。

9.2 设备分类（OS家族 × 设备类型）
- 分类层级（固定两级）：
  - L1：OS家族（Windows/macOS/Linux/其他）
  - L2：设备类型（台式机/笔记本/服务器/VDI/瘦终端/其他）
- 可选子维度：
  - Windows 主版本（Win7/10/11/Server）或 Linux 发行版（UOS/麒麟/CentOS/Ubuntu）作为附加筛选项（不纳入分类层级）。
- 存储与字段：
  - category_path：string；示例 `Windows/笔记本`
  - category_code：string；示例 `win.laptop`
  - category_l1..l2：string；L1/L2 名称（不足级别留空）
  - taxonomy_id：固定 `os_device`
  - 分类来源：系统计算；字段缺失时以“未知”占位但不中断上层聚合
- 计算规则（示例）：
  - OS家族：从 `操作系统类型/osType` 归一映射（Windows/macOS/Linux/其他）
  - 设备类型：从 `终端类型`（或 EDR客户端类型）映射（desktop→台式机、laptop→笔记本、server→服务器、vdi→VDI、thin→瘦终端）
- 展示与筛选：
  - 提供“分类导航”（级联/面包屑），支持逐级下钻与多选；顶部提供 L1/L2 维度的筛选。
  - 统计：按 L1/L2 输出计数，用于看板与饼/柱图；OS家族与设备类型作为顶层统计维度。

9.3 组织分组（基于归属组织部门）
- 设计目标：以组织树（单位/部门/科室…）为唯一分组方式进行展示与下钻，反映管理归属与责任边界；与“设备分类”解耦。
- 展示：左侧组织树或顶部组织路径（面包屑）作为主分组；选中节点后，右侧列表显示该节点及子节点的设备，支持继续按分类维度（OS/设备类型）进行二次筛选。
- 统计：每个组织节点展示设备总数与状态摘要（运行中/已关机/未知、受保护/未保护等）。
- 字段与来源：
  - deptPath（组织路径）/ org_unit_id：来源于“所属组织/部门”；通过 org_path_norm 归一为标准路径。
- 数据结构：
  - org_unit：id, parent_id, name, path, level, created_at, updated_at
  - endpoint：持有 org_unit_id 或 deptPath（标准路径）
- 刷新：组织字典更新或设备“所属组织/部门”变更时实时/定时刷新分组视图；可选在 org_unit 节点物化计数以提升统计性能。
9.4 归一化与映射
- 码表与映射：
  - os_family_map：原始 OS → Windows/macOS/Linux/其他
  - device_type_map：终端类型/EDR客户端类型 → 台式机/笔记本/服务器/VDI/瘦终端/其他
  - org_path_norm：`所属组织/部门` → OrgUnit 标准层级路径（单位/部门/科室…）
- 未知口径：任一层级缺失填“未知”，但仍保留上层分类以保证聚合。厂商与型号不做归一化、也不纳入分类层级。

9.5 数据结构（后端建议）
分类（OS×设备类型）：
- endpoint_category_taxonomy：id, parent_id, level, name, code, taxonomy_id(os_device), created_at
- endpoint_category_assignment：endpoint_id, taxonomy_id(os_device), category_path, category_code, l1, l2, computed_at
- 注：可将 l1..l2 冗余存入 endpoint 主表以便快速筛选，后台作业增量刷新。

分组（组织归属）：
- org_unit：id, parent_id, name, path, level, created_at, updated_at
- endpoint：org_unit_id 或 deptPath（标准路径）
9.6 计算与刷新策略
- 分类：终端数据变更（os/type）或定时重算（如每日）触发；物化路径与索引保障筛选性能。
- 分组：组织字典变更或设备组织变更触发；支持懒加载与节点级计数物化。

9.7 示例
- 分类（OS×设备类型）：某终端 Windows 10，笔记本 →
  - category_path: `Windows/笔记本`
  - category_code: `win.laptop`
- 分组（组织归属）：某单位/信息中心/网络科 节点下的设备 →
  - 组织路径: `某单位/信息中心/网络科`
  - 列表展示该节点及子节点设备，节点上显示数量与状态汇总。


---

## 10. 设备列表页 | 线框图与交互

10.1 页面布局（高卡片行列表示意）

```
+--------------------------------------------------------------------------------------+
|  概览统计与核心操作                                                                   |
|  终端总量 N  | 运行中 X | 已关机 Y | 未知 Z   ｜ 风险：高 A｜中 B｜正常 C             |
|  防护覆盖率 P% ｜ 未安装 M                                 [新建] [导入] [导出]       |
+--------------------------------------------------------------------------------------+
| 分组与分类（左侧 280-320px）           |  搜索与筛选 + 高卡片行列表（右侧自适应）      |
|----------------------------------------+----------------------------------------------|
|  分组（组织树）                        |  [🔍 名称/IP/用户/资产 ………… ] [搜索]   [清空]   |
|  - [输入框：搜索组织]                  |  快捷筛选：运行状态｜保护状态｜准入状态        |
|  ▸ 某单位(120)                         |----------------------------------------------|
|    ▸ 信息中心(58)                      |  高度较高的列表卡（每行 ~160-200px）          |
|      ▸ 网络科(24)                      |  ┌───────────────────────────────────────────┐ |
|  ▸ 另一单位(85)                        |  | 标题区：设备名称（主）  资产号/ID（副）     | |
|                                        |  | 副标题：IP · 运行色点（同云主机）          | |
|  分类（OS × 类型）                     |  | 风险与防护：左“风险三格条”｜右“防护图标”   | |
|  OS家族                                |  | 信息区（两列/三列栅格）：                  | |
|  [ ] Windows (N)                       |  |  - OS/设备类型/EDR客户端类型               | |
|  [ ] macOS (N)                         |  |  - 网络（IP/MAC）                           | |
|  [ ] Linux (N)                         |  |  - 使用人/组织（姓名（账号）/末级组织）     | |
|  设备类型                              |  |  - 准入状态｜保护/阻断/锁定｜最后活跃       | |
|  [ ] 台式机(N) [ ] 笔记本(N) …        |  | 操作：查看详情｜更多（悬浮显露）            | |
|  可选筛选（折叠）                      |  └───────────────────────────────────────────┘ |
|  - Windows主版本 / Linux发行版         |  分页： « ‹ 1 2 3 … › »    每页 20            |
|                                        |                                              |
|  [清空所有筛选]                        |                                              |
+--------------------------------------------------------------------------------------+
```

10.2 高卡片行信息块（最终）
- 标题区：
  - 设备名称（主）+ 资产编号（次）+ EDR 客户端类型标签（如“Windows桌面终端”）；
  - 下方为 IP + 运行状态色点（绿/灰/橙），MAC 作为补充以“·”间隔；
- 右上状态区（结论组）：
  - 横向排列“风险三格 → 防护状态图标 → 准入状态图标”，三者均支持悬浮说明；
  - 结论组下方展示“最近更新时间：YYYY-MM-DD HH:mm”，缺失时为“未上报”；
- 信息区（两/三列自适应栅格）：
  - 操作系统：OS 名称 + 版本；
  - 设备类型：台式机/笔记本/服务器/VDI/瘦终端/其他；
  - 使用人：姓名（账号，可缺省账号）；
  - 所属组织：标准化组织路径（单位/部门/科室…），超长截断；
- 不展示项：
  - 网络（网段/交换机等）不在信息区；
  - 准入状态、管控/安全软件不在信息区；安全软件明细合并到“防护状态”图标的悬浮说明中；
- 操作区：
  - 左侧“查看详情｜更多操作”，右侧无其他信息（更新时间已移入状态区）。

10.3 筛选与搜索
- 全文检索：名称 / IP / 用户 / 资产编号（模糊）
- 快捷筛选：运行状态、保护状态、准入状态（互斥单选，支持清空）
- 左侧树选中组织节点后：右侧结果包含该节点及子节点设备；再次叠加分类（OS/类型）与快捷筛选
- 可选高级筛选（折叠）：OS主版本 / Linux发行版、是否国产、所属网段等

10.4 统计与核心操作
- 顶部 Token：
  - 终端总量（N）与运行细分（运行中/已关机/未知）
  - 风险（高/中/正常）与防护覆盖率（P%）/未安装（M）
- 操作按钮：新建终端、导入台账、导出台账（仅此处集中展示）

10.5 交互细节（同云主机状态设计口径）
- 左侧面板支持折叠/展开；组织树节点懒加载；节点右侧显示数量与状态迷你提示
- 列表支持排序（默认按最后活跃时间降序）
- 状态展示口径：
  - 运行状态：运行中/已关机/未知；色点贴靠 IP
  - 保护状态：由“终端安全软件（多值）”聚合（在线EDR优先）
  - 准入状态：以 NAC 数据为准
- 空态：当前筛选无结果时展示“清空筛选”与“返回组织树根节点”的快捷操作

10.6 性能与可用性
- 提示：接口分页、行虚拟化（>1000 行时建议）
- 懒加载：组织树与多值字段 hover 时再拉取详情（如软件清单摘要）
- 可达性：键盘导航支持；列宽自适应并保留 title 提示

10.7 实装逻辑说明
- 分组与分类：左侧仅保留组织树（默认展开，支持搜索 / 清除）；右侧顶部展示“操作系统 / 设备类型”统计条，筛选栏一次性承载运行、防护、准入、操作系统、设备类型五组 CheckableTag，置于统一浅色背景容器并提供“清空全部筛选”操作。
- 交互联动：组织树选择 + 关键词 + 五组筛选互相叠加，统计条与筛选计数实时更新，呈现“联动统计”的效果，视觉样式与云主机列表保持一致。
- 卡片信息：标题行展示设备名称、资产号、EDR 客户端类型；运行色点贴靠 IP/MAC。右上角状态组统一承载风险三格、防护图标、准入图标以及“最近更新时间”文案，便于不同客户按需裁剪（若某类数据缺失，可隐藏对应图标）。
- 信息区域：保留“操作系统”“设备类型”“使用人”“所属组织”四块基础字段，去掉网络、管控状态、安全软件等次要信息以降低噪音；“最近更新时间”移动到状态区域底部。
- 安全软件明细：整合进防护图标 Tooltip 中，hover 展示软件名称 / 版本 / 在线状态；若无数据则显示空态文字，避免卡片重复信息。

10.8 信息结构与呈现（列表卡片）
- 头部（主信息）：设备名称（主标题）+ 资产编号（次要标签）；运行状态色点贴靠 IP，IP 优先展示，MAC 次之。
- 右上状态区（结论组）：按“风险三格 → 防护状态 → 准入状态”水平排列，结论组下方展示“最近更新时间”。
- 基础信息网格：
  - 操作系统：OS 名称 + 版本（如无版本，仅展示名称），不拼接设备类型。
  - 设备类型：台式机/笔记本/服务器/VDI/瘦终端/其他。
  - 使用人：姓名（账号）
  - 所属组织：标准化组织路径（单位/部门/科室…），超长截断，完整值通过悬浮提示查看。
- 标签规范：EDR 客户端类型作为辅助标签出现在标题行；其他标签不在卡片上出现，避免信息堆叠。

10.9 状态图标与判定口径
- 风险三格：
  - 高：高危漏洞数 > 0 或 未处理告警数 ≥ 3；
  - 中：未处理告警数 ∈ [1,2] 且高危漏洞数 = 0；
  - 正常：其余情况；
  - 展示：三格从左到右填充（高=3格，中=2格，正常=1格），悬浮给出“告警数/高危漏洞数”说明。
- 防护状态：
  - 未防护：未安装 EDR；
  - 离线：已安装但离线；
  - 防护中：已安装且在线；
  - 悬浮展示该终端的安全软件明细（产品、版本、在线状态），无数据时显示空态说明。
- 准入状态：
  - 取值：待注册/审核中/审核通过/驳回/注销（以准入系统为准）；
  - 展示：状态图标（颜色区分）+ 悬浮说明，不占用主信息行；
  - 客户化：如现场无准入数据，可隐藏该图标，不影响其他状态展示。
- 运行状态：
  - 运行中/已关机/未知；色点贴靠 IP；数据缺失时不展示色点。
- 最近更新时间：
  - 放置于状态图标下方，展示“最近在线/最后活跃时间”；缺失时显示“未上报”。

10.10 筛选与统计联动规则
- 分组与筛选叠加：组织树选中节点后，右侧结果仅包含该组织及所有子组织设备；其后再叠加关键词与各筛选项。
- 统计条：展示当前结果集中的 OS 与设备类型分布，仅作为统计，不可直接点击；
- 筛选条（统一背景）：支持运行状态、防护状态、准入状态、操作系统、设备类型五组条件，任一条件变更后：
  - 联动更新统计条与其余筛选项的计数/可用集合；
  - 如某筛选项无可用结果，置灰并可清除；
  - 提供“清空全部筛选”重置为“仅组织+关键词”的基础结果。

10.11 空态、缺省与容错
- 空态（无结果）：展示友好提示与“清空筛选”“返回组织根节点”捷径；
- 字段缺省：
  - 设备名称：不可缺省；
  - IP/MAC：二者至少展示一项；
  - OS/设备类型：如缺失，显示“未知”；
  - 使用人/组织：如缺失，显示“未分配/未归属”；
  - 状态图标：对应数据缺失时隐藏，不保留占位；
- 长文本：组织路径、设备名称超过单行时截断，悬浮显示完整内容。

10.12 文案与标签规范
- 运行状态：
  - RUNNING=“运行中”，STOPPED=“已关机”，UNKNOWN=“未知”；
- 防护状态：
  - 未防护/离线/防护中；tooltip 采用“产品名 版本 在线/离线”的行式展示；
- 准入状态：
  - 待注册/审核中/审核通过/驳回/注销；仅图标与 tooltip 呈现，不以文本标签占位；
- 最近更新时间：
  - 统一文案前缀“最近更新时间：”；
- 使用人显示：
  - 姓名（账号），账号缺失时不展示括号。
