<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>业务应用监控详情</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        /* 顶部栏样式 */
        .header {
            background: white;
            border-radius: 8px;
            padding: 16px 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .app-info {
            display: flex;
            align-items: center;
        }
        
        .app-name {
            font-size: 20px;
            font-weight: 600;
            margin-right: 12px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            margin-right: 20px;
        }
        
        .status-online {
            background-color: #e6f7ff;
            color: #1890ff;
        }
        
        .monitor-info {
            color: #666;
            font-size: 14px;
            margin-right: 20px;
        }
        
        .filter-controls {
            display: flex;
            gap: 15px;
        }
        
        .time-picker, .app-selector {
            padding: 6px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
        }
        
        /* 概览区域样式 */
        .overview {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        
        .stat-card {
            background: white;
            border-radius: 6px;
            padding: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .stat-title {
            font-size: 13px;
            color: #666;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-icon {
            font-size: 14px;
            color: #1890ff;
        }
        
        .stat-value {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .stat-trend {
            font-size: 11px;
            display: flex;
            align-items: center;
        }
        
        .trend-up {
            color: #f5222d;
        }
        
        .trend-down {
            color: #52c41a;
        }
        
        /* 健康度指示器 */
        .health-indicator {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 500;
            margin-top: 4px;
        }
        
        .health-excellent {
            background-color: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }
        
        .health-good {
            background-color: #e6f7ff;
            color: #1890ff;
            border: 1px solid #91d5ff;
        }
        
        .health-warning {
            background-color: #fffbe6;
            color: #faad14;
            border: 1px solid #ffe58f;
        }
        
        .health-critical {
            background-color: #fff2f0;
            color: #f5222d;
            border: 1px solid #ffccc7;
        }
        
        /* 指标卡片趋势图 */
        .stat-trend-chart {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 60px;
            height: 30px;
        }
        
        .trend-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px;
            border-radius: 4px;
            font-size: 11px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
            white-space: nowrap;
        }
        
        /* 告警区域样式 */
        .alerts-section, .vulnerability-section {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title i {
            color: #1890ff;
            margin-right: 6px;
        }
        
        .view-all {
            font-size: 12px;
            color: #1890ff;
            cursor: pointer;
        }
        
        .alert-levels, .vuln-levels {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .alert-level, .vuln-level {
            flex: 1;
            text-align: center;
            padding: 10px 6px;
            border-radius: 6px;
            color: white;
            position: relative;
        }
        
        .alert-level .count, .vuln-level .count {
            font-size: 20px;
            font-weight: 700;
        }
        
        .alert-level .label, .vuln-level .label {
            font-size: 11px;
            margin-top: 2px;
        }
        
        .alert-critical, .vuln-critical {
            background-color: #f5222d;
        }
        
        .alert-warning, .vuln-high {
            background-color: #faad14;
        }
        
        .alert-info, .vuln-medium {
            background-color: #1890ff;
        }
        
        .vuln-low {
            background-color: #52c41a;
        }
        
        .alert-list, .vuln-list {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .alert-card, .vuln-card {
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 4px solid #f5222d;
            background-color: #fff2f0;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 13px;
        }
        
        .alert-card.warning, .vuln-card.high {
            border-left-color: #faad14;
            background-color: #fffbe6;
        }
        
        .alert-card.info, .vuln-card.medium {
            border-left-color: #1890ff;
            background-color: #f0f8ff;
        }
        
        .vuln-card.low {
            border-left-color: #52c41a;
            background-color: #f6ffed;
        }
        
        .alert-card:hover, .vuln-card:hover {
            transform: translateX(4px);
        }
        
        .alert-header, .vuln-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }
        
        .alert-title, .vuln-title {
            font-weight: 500;
            flex: 1;
        }
        
        .alert-level-badge, .vuln-level-badge {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 3px;
            color: white;
        }
        
        .alert-critical-badge, .vuln-critical-badge {
            background-color: #f5222d;
        }
        
        .alert-warning-badge, .vuln-high-badge {
            background-color: #faad14;
        }
        
        .alert-info-badge, .vuln-medium-badge {
            background-color: #1890ff;
        }
        
        .vuln-low-badge {
            background-color: #52c41a;
        }
        
        .alert-details, .vuln-details {
            display: flex;
            font-size: 11px;
            color: #666;
            margin-bottom: 4px;
        }
        
        .alert-detail, .vuln-detail {
            margin-right: 12px;
            display: flex;
            align-items: center;
        }
        
        .alert-detail i, .vuln-detail i {
            margin-right: 4px;
            font-size: 10px;
        }
        
        .alert-footer, .vuln-footer {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #999;
        }
        
        .alert-status, .vuln-status {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 10px;
            background-color: #f5f5f5;
            color: #666;
        }
        
        /* 详情区域样式 */
        .details {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        
        .tab.active {
            color: #1890ff;
            border-bottom: 2px solid #1890ff;
        }
        
        .tab-content {
            padding: 20px;
            min-height: 500px;
        }
        
        /* 拓扑图样式 */
        .topology-container {
            width: 100%;
            height: 500px;
            border: 1px solid #f0f0f0;
            border-radius: 4px;
            position: relative;
            overflow: auto;
            background-color: #fafafa;
        }
        
        .topology-node {
            position: absolute;
            width: 140px;
            height: 80px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s;
            padding: 8px;
        }
        
        .topology-node:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .node-app {
            background-color: #1890ff;
            color: white;
        }
        
        .node-service {
            background-color: #52c41a;
            color: white;
        }
        
        .node-middleware {
            background-color: #faad14;
            color: white;
        }
        
        .node-server {
            background-color: #722ed1;
            color: white;
        }
        
        .node-header {
            display: flex;
            align-items: center;
            width: 100%;
            margin-bottom: 6px;
        }
        
        .node-icon {
            font-size: 16px;
            margin-right: 6px;
        }
        
        .node-health {
            margin-left: auto;
            font-size: 12px;
            display: flex;
            align-items: center;
        }
        
        .health-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 4px;
        }
        
        .health-excellent-dot {
            background-color: #52c41a;
        }
        
        .health-good-dot {
            background-color: #1890ff;
        }
        
        .health-warning-dot {
            background-color: #faad14;
        }
        
        .health-critical-dot {
            background-color: #f5222d;
        }
        
        .node-name {
            font-size: 14px;
            font-weight: 500;
            width: 100%;
            text-align: center;
            margin-bottom: 4px;
        }
        
        .node-id {
            font-size: 11px;
            opacity: 0.9;
            margin-bottom: 4px;
        }
        
        .node-type {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .alert-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #f5222d;
            border: 2px solid white;
        }
        
        .topology-line {
            position: absolute;
            height: 2px;
            background-color: #d9d9d9;
            transform-origin: 0 0;
        }
        
        /* 图例样式 - 在拓扑图内 */
        .topology-legend {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-size: 12px;
            z-index: 10;
            min-width: 150px;
        }
        
        .legend-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        /* 资产类型统计 - 在拓扑图内 */
        .asset-stats {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-size: 12px;
            z-index: 10;
            min-width: 150px;
        }
        
        .asset-stats-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .asset-stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            align-items: center;
        }
        
        .asset-stat-name {
            display: flex;
            align-items: center;
        }
        
        .asset-stat-color {
            width: 10px;
            height: 10px;
            border-radius: 2px;
            margin-right: 6px;
        }
        
        .asset-stat-count {
            font-weight: 600;
        }
        
        /* 性能监控样式 */
        .metrics-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .metric-chart {
            background: white;
            border-radius: 6px;
            padding: 16px;
            height: 250px;
            border: 1px solid #f0f0f0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .chart-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chart-value {
            font-size: 12px;
            color: #666;
        }
        
        .chart-container {
            width: 100%;
            height: calc(100% - 30px);
            position: relative;
        }
        
        .chart-canvas {
            width: 100%;
            height: 100%;
        }
        
        .chart-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }
        
        /* 响应式调整 */
        @media (max-width: 1400px) {
            .overview {
                grid-template-columns: 1fr 1fr;
            }
            
            .stats-cards {
                grid-column: 1 / span 2;
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        @media (max-width: 1200px) {
            .overview {
                grid-template-columns: 1fr;
            }
            
            .stats-cards {
                grid-column: 1;
                grid-template-columns: repeat(3, 1fr);
            }
            
            .metrics-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .filter-controls {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 顶部栏 -->
        <div class="header">
            <div class="app-info">
                <h1 class="app-name">用户中心服务</h1>
                <span class="status-badge status-online">在线</span>
                <span class="monitor-info">监测时长: 15天</span>
                <span class="monitor-info">数据更新时间: 2023-11-15 14:30:25</span>
            </div>
            <div class="filter-controls">
                <select class="time-picker">
                    <option>过去1小时</option>
                    <option>过去24小时</option>
                    <option selected>过去7天</option>
                    <option>过去30天</option>
                    <option>自定义时间</option>
                </select>
                <select class="app-selector">
                    <option>用户中心服务</option>
                    <option>订单服务</option>
                    <option>支付服务</option>
                    <option>商品服务</option>
                </select>
            </div>
        </div>
        
        <!-- 概览区域 -->
        <div class="overview">
            <!-- 指标统计卡片 -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-title">
                        <span>健康度</span>
                        <i class="fas fa-heartbeat stat-icon"></i>
                    </div>
                    <div class="stat-value">92</div>
                    <div class="health-indicator health-good">良好</div>
                    <div class="stat-trend-chart" id="healthTrend"></div>
                    <div class="trend-tooltip" id="healthTooltip"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">
                        <span>访问量</span>
                        <i class="fas fa-chart-line stat-icon"></i>
                    </div>
                    <div class="stat-value">12.5万</div>
                    <div class="stat-trend trend-down">↓ 5.2% 较上周</div>
                    <div class="stat-trend-chart" id="visitTrend"></div>
                    <div class="trend-tooltip" id="visitTooltip"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">
                        <span>日志量</span>
                        <i class="fas fa-file-alt stat-icon"></i>
                    </div>
                    <div class="stat-value">3.2GB</div>
                    <div class="stat-trend trend-up">↑ 8.7% 较上周</div>
                    <div class="stat-trend-chart" id="logTrend"></div>
                    <div class="trend-tooltip" id="logTooltip"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">
                        <span>错误率</span>
                        <i class="fas fa-exclamation-triangle stat-icon"></i>
                    </div>
                    <div class="stat-value">0.15%</div>
                    <div class="stat-trend trend-down">↓ 0.03% 较上周</div>
                    <div class="stat-trend-chart" id="errorTrend"></div>
                    <div class="trend-tooltip" id="errorTooltip"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">
                        <span>响应时间</span>
                        <i class="fas fa-tachometer-alt stat-icon"></i>
                    </div>
                    <div class="stat-value">142ms</div>
                    <div class="stat-trend trend-down">↓ 12ms 较上周</div>
                    <div class="stat-trend-chart" id="responseTrend"></div>
                    <div class="trend-tooltip" id="responseTooltip"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">
                        <span>SLA</span>
                        <i class="fas fa-shield-alt stat-icon"></i>
                    </div>
                    <div class="stat-value">99.95%</div>
                    <div class="stat-trend trend-up">↑ 0.02% 较上周</div>
                    <div class="stat-trend-chart" id="slaTrend"></div>
                    <div class="trend-tooltip" id="slaTooltip"></div>
                </div>
            </div>
            
            <!-- 脆弱性动态 -->
            <div class="vulnerability-section">
                <div class="section-title">
                    <span><i class="fas fa-bug"></i> 脆弱性动态 <span style="font-size: 12px; color: #f5222d;">今日新增: 2</span></span>
                    <span class="view-all">查看全部 <i class="fas fa-chevron-right"></i></span>
                </div>
                <div class="vuln-levels">
                    <div class="vuln-level vuln-critical">
                        <div class="count">1</div>
                        <div class="label">严重</div>
                    </div>
                    <div class="vuln-level vuln-high">
                        <div class="count">3</div>
                        <div class="label">高危</div>
                    </div>
                    <div class="vuln-level vuln-medium">
                        <div class="count">5</div>
                        <div class="label">中危</div>
                    </div>
                    <div class="vuln-level vuln-low">
                        <div class="count">8</div>
                        <div class="label">低危</div>
                    </div>
                </div>
                <div class="vuln-list">
                    <div class="vuln-card">
                        <div class="vuln-header">
                            <div class="vuln-title">SQL注入漏洞</div>
                            <span class="vuln-level-badge vuln-critical-badge">严重</span>
                        </div>
                        <div class="vuln-details">
                            <div class="vuln-detail">
                                <i class="far fa-clock"></i> 14:25:32
                            </div>
                            <div class="vuln-detail">
                                <i class="fas fa-cogs"></i> 用户服务
                            </div>
                        </div>
                        <div class="vuln-footer">
                            <span class="vuln-status">未修复</span>
                            <span>CVE-2023-12345</span>
                        </div>
                    </div>
                    <div class="vuln-card high">
                        <div class="vuln-header">
                            <div class="vuln-title">XSS跨站脚本漏洞</div>
                            <span class="vuln-level-badge vuln-high-badge">高危</span>
                        </div>
                        <div class="vuln-details">
                            <div class="vuln-detail">
                                <i class="far fa-clock"></i> 13:42:15
                            </div>
                            <div class="vuln-detail">
                                <i class="fas fa-cube"></i> 用户中心
                            </div>
                        </div>
                        <div class="vuln-footer">
                            <span class="vuln-status">修复中</span>
                            <span>CVE-2023-12346</span>
                        </div>
                    </div>
                    <div class="vuln-card medium">
                        <div class="vuln-header">
                            <div class="vuln-title">信息泄露漏洞</div>
                            <span class="vuln-level-badge vuln-medium-badge">中危</span>
                        </div>
                        <div class="vuln-details">
                            <div class="vuln-detail">
                                <i class="far fa-clock"></i> 11:18:07
                            </div>
                            <div class="vuln-detail">
                                <i class="fas fa-server"></i> 服务器A
                            </div>
                        </div>
                        <div class="vuln-footer">
                            <span class="vuln-status">已修复</span>
                            <span>CVE-2023-12347</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 待处置告警 -->
            <div class="alerts-section">
                <div class="section-title">
                    <span><i class="fas fa-bell"></i> 待处置告警 <span style="font-size: 12px; color: #f5222d;">今日新增: 3</span></span>
                    <span class="view-all">查看全部 <i class="fas fa-chevron-right"></i></span>
                </div>
                <div class="alert-levels">
                    <div class="alert-level alert-critical">
                        <div class="count">1</div>
                        <div class="label">紧急</div>
                    </div>
                    <div class="alert-level alert-warning">
                        <div class="count">2</div>
                        <div class="label">警告</div>
                    </div>
                    <div class="alert-level alert-info">
                        <div class="count">5</div>
                        <div class="label">提醒</div>
                    </div>
                </div>
                <div class="alert-list">
                    <div class="alert-card">
                        <div class="alert-header">
                            <div class="alert-title">CPU使用率超过90%持续5分钟</div>
                            <span class="alert-level-badge alert-critical-badge">紧急</span>
                        </div>
                        <div class="alert-details">
                            <div class="alert-detail">
                                <i class="far fa-clock"></i> 14:25:32
                            </div>
                            <div class="alert-detail">
                                <i class="fas fa-server"></i> 服务器A
                            </div>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-status">未处理</span>
                            <span>发现时间: 2023-11-15</span>
                        </div>
                    </div>
                    <div class="alert-card warning">
                        <div class="alert-header">
                            <div class="alert-title">API响应时间超过2秒</div>
                            <span class="alert-level-badge alert-warning-badge">警告</span>
                        </div>
                        <div class="alert-details">
                            <div class="alert-detail">
                                <i class="far fa-clock"></i> 13:42:15
                            </div>
                            <div class="alert-detail">
                                <i class="fas fa-cogs"></i> 用户服务
                            </div>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-status">处理中</span>
                            <span>发现时间: 2023-11-15</span>
                        </div>
                    </div>
                    <div class="alert-card info">
                        <div class="alert-header">
                            <div class="alert-title">数据库连接数接近上限</div>
                            <span class="alert-level-badge alert-info-badge">提醒</span>
                        </div>
                        <div class="alert-details">
                            <div class="alert-detail">
                                <i class="far fa-clock"></i> 11:18:07
                            </div>
                            <div class="alert-detail">
                                <i class="fas fa-database"></i> MySQL
                            </div>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-status">已确认</span>
                            <span>发现时间: 2023-11-15</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 详情区域 -->
        <div class="details">
            <div class="tabs">
                <div class="tab active" data-tab="topology">资产关系</div>
                <div class="tab" data-tab="metrics">性能监控分析</div>
            </div>
            
            <!-- 资产关系拓扑 -->
            <div class="tab-content" id="topology-content">
                <div class="topology-container" id="topology">
                    <!-- 拓扑节点和连线将通过JS动态生成 -->
                    
                    <!-- 健康度图例 - 在拓扑图内 -->
                    <div class="topology-legend">
                        <div class="legend-title">健康度图例</div>
                        <div class="legend-item">
                            <div class="legend-color health-excellent-dot"></div>
                            <span>健康 (90-100)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color health-good-dot"></div>
                            <span>良好 (70-89)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color health-warning-dot"></div>
                            <span>异常 (50-69)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color health-critical-dot"></div>
                            <span>故障 (0-49)</span>
                        </div>
                    </div>
                    
                    <!-- 资产类型统计 - 在拓扑图内 -->
                    <div class="asset-stats">
                        <div class="asset-stats-title">资产类型统计</div>
                        <div class="asset-stat-item">
                            <div class="asset-stat-name">
                                <div class="asset-stat-color" style="background-color: #1890ff;"></div>
                                <span>应用</span>
                            </div>
                            <div class="asset-stat-count">1</div>
                        </div>
                        <div class="asset-stat-item">
                            <div class="asset-stat-name">
                                <div class="asset-stat-color" style="background-color: #52c41a;"></div>
                                <span>服务</span>
                            </div>
                            <div class="asset-stat-count">3</div>
                        </div>
                        <div class="asset-stat-item">
                            <div class="asset-stat-name">
                                <div class="asset-stat-color" style="background-color: #faad14;"></div>
                                <span>中间件</span>
                            </div>
                            <div class="asset-stat-count">3</div>
                        </div>
                        <div class="asset-stat-item">
                            <div class="asset-stat-name">
                                <div class="asset-stat-color" style="background-color: #722ed1;"></div>
                                <span>服务器</span>
                            </div>
                            <div class="asset-stat-count">3</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 性能监控分析 -->
            <div class="tab-content" id="metrics-content" style="display: none;">
                <div class="metrics-container">
                    <div class="metric-chart">
                        <div class="chart-title">
                            <span>CPU使用率</span>
                            <span class="chart-value">当前: 42.5%</span>
                        </div>
                        <div class="chart-container">
                            <canvas class="chart-canvas" id="cpuChart"></canvas>
                            <div class="chart-tooltip" id="cpuTooltip"></div>
                        </div>
                    </div>
                    <div class="metric-chart">
                        <div class="chart-title">
                            <span>内存使用率</span>
                            <span class="chart-value">当前: 68.2%</span>
                        </div>
                        <div class="chart-container">
                            <canvas class="chart-canvas" id="memoryChart"></canvas>
                            <div class="chart-tooltip" id="memoryTooltip"></div>
                        </div>
                    </div>
                    <div class="metric-chart">
                        <div class="chart-title">
                            <span>API响应时间</span>
                            <span class="chart-value">当前: 142ms</span>
                        </div>
                        <div class="chart-container">
                            <canvas class="chart-canvas" id="responseChart"></canvas>
                            <div class="chart-tooltip" id="responseTooltip"></div>
                        </div>
                    </div>
                    <div class="metric-chart">
                        <div class="chart-title">
                            <span>错误率</span>
                            <span class="chart-value">当前: 0.15%</span>
                        </div>
                        <div class="chart-container">
                            <canvas class="chart-canvas" id="errorChart"></canvas>
                            <div class="chart-tooltip" id="errorTooltip"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab切换功能
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // 移除所有tab的active类
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                // 添加当前tab的active类
                this.classList.add('active');
                
                // 隐藏所有tab内容
                document.getElementById('topology-content').style.display = 'none';
                document.getElementById('metrics-content').style.display = 'none';
                
                // 显示当前tab内容
                const tabId = this.getAttribute('data-tab') + '-content';
                document.getElementById(tabId).style.display = 'block';
                
                // 如果是性能监控tab，初始化图表
                if (tabId === 'metrics-content') {
                    initCharts();
                }
            });
        });
        
        // 查看全部告警
        document.querySelectorAll('.view-all').forEach(button => {
            button.addEventListener('click', function() {
                alert('跳转到详情列表页面，支持检索和处置功能');
            });
        });
        
        // 告警卡片点击事件
        document.querySelectorAll('.alert-card, .vuln-card').forEach(card => {
            card.addEventListener('click', function() {
                alert('查看详情，可进行处置操作');
            });
        });
        
        // 拓扑图生成
        function generateTopology() {
            const topologyContainer = document.getElementById('topology');
            
            // 定义节点数据 - 按照层次从左到右排列
            const nodes = [
                // 第一层：应用
                { id: 1, name: '用户中心', idName: 'user-center', type: '应用', category: 'app', x: 100, y: 250, health: 92, healthStatus: 'good', icon: 'fas fa-cube', hasAlert: false },
                
                // 第二层：服务
                { id: 2, name: '认证服务', idName: 'auth-service', type: '服务', category: 'service', x: 300, y: 150, health: 95, healthStatus: 'good', icon: 'fas fa-cogs', hasAlert: false },
                { id: 3, name: '用户服务', idName: 'user-service', type: '服务', category: 'service', x: 300, y: 250, health: 65, healthStatus: 'warning', icon: 'fas fa-cogs', hasAlert: true },
                { id: 4, name: '权限服务', idName: 'permission-service', type: '服务', category: 'service', x: 300, y: 350, health: 99, healthStatus: 'excellent', icon: 'fas fa-cogs', hasAlert: false },
                
                // 第三层：中间件
                { id: 5, name: 'MySQL', idName: 'mysql-db', type: '数据库', category: 'middleware', x: 500, y: 150, health: 88, healthStatus: 'good', icon: 'fas fa-database', hasAlert: false },
                { id: 6, name: 'Redis', idName: 'redis-cache', type: '缓存', category: 'middleware', x: 500, y: 250, health: 96, healthStatus: 'excellent', icon: 'fas fa-bolt', hasAlert: false },
                { id: 7, name: 'Kafka', idName: 'kafka-mq', type: '消息队列', category: 'middleware', x: 500, y: 350, health: 45, healthStatus: 'critical', icon: 'fas fa-stream', hasAlert: true },
                
                // 第四层：服务器
                { id: 8, name: '服务器A', idName: 'server-a', type: '服务器', category: 'server', x: 700, y: 150, health: 85, healthStatus: 'good', icon: 'fas fa-server', hasAlert: false },
                { id: 9, name: '服务器B', idName: 'server-b', type: '服务器', category: 'server', x: 700, y: 250, health: 92, healthStatus: 'excellent', icon: 'fas fa-server', hasAlert: false },
                { id: 10, name: '服务器C', idName: 'server-c', type: '服务器', category: 'server', x: 700, y: 350, health: 35, healthStatus: 'critical', icon: 'fas fa-server', hasAlert: true }
            ];
            
            // 定义连线数据
            const connections = [
                { from: 1, to: 2 },
                { from: 1, to: 3 },
                { from: 1, to: 4 },
                { from: 2, to: 5 },
                { from: 3, to: 5 },
                { from: 3, to: 6 },
                { from: 4, to: 6 },
                { from: 4, to: 7 },
                { from: 5, to: 8 },
                { from: 6, to: 9 },
                { from: 7, to: 10 }
            ];
            
            // 创建节点
            nodes.forEach(node => {
                const nodeElement = document.createElement('div');
                nodeElement.className = `topology-node node-${node.category}`;
                nodeElement.style.left = `${node.x}px`;
                nodeElement.style.top = `${node.y}px`;
                
                // 健康度状态类
                const healthClass = `health-${node.healthStatus}-dot`;
                
                nodeElement.innerHTML = `
                    <div class="node-header">
                        <i class="${node.icon} node-icon"></i>
                        <div class="node-health">
                            <span class="health-dot ${healthClass}"></span>
                            <span>${node.health}</span>
                        </div>
                    </div>
                    <div class="node-name">${node.name}</div>
                    <div class="node-id">${node.idName}</div>
                    <div class="node-type">${node.type}</div>
                    ${node.hasAlert ? '<div class="alert-badge"></div>' : ''}
                `;
                
                // 添加点击事件
                nodeElement.addEventListener('click', function() {
                    alert(`查看 ${node.name} 详情\n标识: ${node.idName}\n健康度: ${node.health}\n类型: ${node.type}`);
                });
                
                topologyContainer.appendChild(nodeElement);
            });
            
            // 创建连线
            connections.forEach(conn => {
                const fromNode = nodes.find(n => n.id === conn.from);
                const toNode = nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const line = document.createElement('div');
                    line.className = 'topology-line';
                    
                    // 计算连线长度和角度 - 从节点边框开始
                    const startX = fromNode.x + 140;
                    const startY = fromNode.y + 40;
                    const endX = toNode.x;
                    const endY = toNode.y + 40;
                    
                    const dx = endX - startX;
                    const dy = endY - startY;
                    const length = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    line.style.width = `${length}px`;
                    line.style.left = `${startX}px`;
                    line.style.top = `${startY}px`;
                    line.style.transform = `rotate(${angle}deg)`;
                    
                    topologyContainer.appendChild(line);
                }
            });
        }
        
        // 初始化拓扑图
        generateTopology();
        
        // 创建指标卡片趋势图
        function createMiniTrendChart(containerId, data, color, tooltipId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // 清除容器内容
            container.innerHTML = '';
            
            // 创建canvas元素
            const canvas = document.createElement('canvas');
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            const tooltip = document.getElementById(tooltipId);
            
            // 设置Canvas尺寸
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 2;
            
            // 清除Canvas
            ctx.clearRect(0, 0, width, height);
            
            // 计算数据范围
            const maxValue = Math.max(...data);
            const minValue = Math.min(...data);
            const valueRange = maxValue - minValue || 1; // 避免除零
            
            // 绘制数据点连线
            ctx.strokeStyle = color;
            ctx.lineWidth = 1.5;
            
            ctx.beginPath();
            
            const pointCoords = [];
            
            for (let i = 0; i < data.length; i++) {
                const x = padding + (width - 2 * padding) / (data.length - 1) * i;
                const y = height - padding - ((data[i] - minValue) / valueRange) * (height - 2 * padding);
                
                pointCoords.push({x, y, value: data[i]});
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
            
            // 添加鼠标交互
            canvas.addEventListener('mousemove', function(e) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                
                // 查找最近的数据点
                let closestPoint = null;
                let minDistance = Infinity;
                
                pointCoords.forEach(point => {
                    const distance = Math.abs(point.x - mouseX);
                    if (distance < minDistance && distance < 10) {
                        minDistance = distance;
                        closestPoint = point;
                    }
                });
                
                if (closestPoint) {
                    tooltip.style.opacity = '1';
                    tooltip.style.left = (rect.left + closestPoint.x) + 'px';
                    tooltip.style.top = (rect.top - 30) + 'px';
                    tooltip.textContent = `数值: ${closestPoint.value}`;
                } else {
                    tooltip.style.opacity = '0';
                }
            });
            
            canvas.addEventListener('mouseout', function() {
                tooltip.style.opacity = '0';
            });
        }
        
        // 初始化指标卡片趋势图
        function initMiniTrendCharts() {
            // 健康度趋势数据
            const healthData = [85, 88, 90, 92, 91, 93, 92];
            createMiniTrendChart('healthTrend', healthData, '#1890ff', 'healthTooltip');
            
            // 访问量趋势数据
            const visitData = [11, 12, 13, 12.5, 11.8, 12.2, 12.5];
            createMiniTrendChart('visitTrend', visitData, '#52c41a', 'visitTooltip');
            
            // 日志量趋势数据
            const logData = [2.8, 2.9, 3.0, 3.1, 3.2, 3.1, 3.2];
            createMiniTrendChart('logTrend', logData, '#faad14', 'logTooltip');
            
            // 错误率趋势数据
            const errorData = [0.18, 0.16, 0.15, 0.14, 0.15, 0.14, 0.15];
            createMiniTrendChart('errorTrend', errorData, '#f5222d', 'errorTooltip');
            
            // 响应时间趋势数据
            const responseData = [150, 145, 142, 140, 138, 140, 142];
            createMiniTrendChart('responseTrend', responseData, '#722ed1', 'responseTooltip');
            
            // SLA趋势数据
            const slaData = [99.92, 99.93, 99.94, 99.95, 99.94, 99.95, 99.95];
            createMiniTrendChart('slaTrend', slaData, '#1890ff', 'slaTooltip');
        }
        
        // 图表初始化
        function initCharts() {
            // 模拟图表数据
            const timeLabels = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
            
            // CPU使用率数据
            const cpuData = [35, 40, 45, 50, 42, 38, 45, 48, 42];
            createChart('cpuChart', 'CPU使用率 (%)', timeLabels, cpuData, '#1890ff', 'cpuTooltip');
            
            // 内存使用率数据
            const memoryData = [65, 68, 70, 72, 68, 65, 70, 72, 68];
            createChart('memoryChart', '内存使用率 (%)', timeLabels, memoryData, '#52c41a', 'memoryTooltip');
            
            // 响应时间数据
            const responseData = [120, 125, 130, 140, 135, 125, 130, 145, 142];
            createChart('responseChart', '响应时间 (ms)', timeLabels, responseData, '#faad14', 'responseTooltip');
            
            // 错误率数据
            const errorData = [0.1, 0.12, 0.15, 0.18, 0.14, 0.12, 0.15, 0.16, 0.15];
            createChart('errorChart', '错误率 (%)', timeLabels, errorData, '#f5222d', 'errorTooltip');
        }
        
        // 创建图表
        function createChart(canvasId, label, labels, data, color, tooltipId) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const tooltip = document.getElementById(tooltipId);
            
            // 设置Canvas尺寸
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 30;
            
            // 清除Canvas
            ctx.clearRect(0, 0, width, height);
            
            // 计算数据范围
            const maxValue = Math.max(...data) * 1.1;
            
            // 绘制坐标轴
            ctx.strokeStyle = '#d9d9d9';
            ctx.lineWidth = 1;
            
            // X轴
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();
            
            // Y轴
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // 绘制网格线
            ctx.strokeStyle = '#f0f0f0';
            ctx.setLineDash([5, 3]);
            
            // 水平网格线
            for (let i = 1; i < 5; i++) {
                const y = padding + (height - 2 * padding) / 5 * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            ctx.setLineDash([]);
            
            // 绘制数据点连线
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.fillStyle = color;
            
            ctx.beginPath();
            
            const pointCoords = [];
            
            for (let i = 0; i < data.length; i++) {
                const x = padding + (width - 2 * padding) / (data.length - 1) * i;
                const y = height - padding - (data[i] / maxValue) * (height - 2 * padding);
                
                pointCoords.push({x, y, value: data[i], label: labels[i]});
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
            
            // 绘制数据点
            pointCoords.forEach(point => {
                ctx.beginPath();
                ctx.arc(point.x, point.y, 4, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // 绘制X轴标签
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            for (let i = 0; i < labels.length; i++) {
                const x = padding + (width - 2 * padding) / (data.length - 1) * i;
                const y = height - padding + 20;
                
                ctx.fillText(labels[i], x, y);
            }
            
            // 绘制Y轴标签
            ctx.textAlign = 'right';
            ctx.textBaseline = 'middle';
            
            for (let i = 0; i <= 5; i++) {
                const value = (maxValue / 5 * i).toFixed(1);
                const y = height - padding - (height - 2 * padding) / 5 * i;
                
                ctx.fillText(value, padding - 5, y);
            }
            
            // 添加鼠标交互
            canvas.addEventListener('mousemove', function(e) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // 查找最近的数据点
                let closestPoint = null;
                let minDistance = Infinity;
                
                pointCoords.forEach(point => {
                    const distance = Math.sqrt(Math.pow(point.x - mouseX, 2) + Math.pow(point.y - mouseY, 2));
                    if (distance < minDistance && distance < 20) {
                        minDistance = distance;
                        closestPoint = point;
                    }
                });
                
                if (closestPoint) {
                    tooltip.style.opacity = '1';
                    tooltip.style.left = (closestPoint.x + rect.left) + 'px';
                    tooltip.style.top = (closestPoint.y + rect.top - 40) + 'px';
                    tooltip.innerHTML = `${label}<br>${closestPoint.label}: ${closestPoint.value}`;
                } else {
                    tooltip.style.opacity = '0';
                }
            });
            
            canvas.addEventListener('mouseout', function() {
                tooltip.style.opacity = '0';
            });
        }
        
        // 初始化图表
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            initMiniTrendCharts();
        });
    </script>
</body>
</html>