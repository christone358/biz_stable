import React from 'react'
import { Card, Row, Col, Statistic } from 'antd'
import { ArrowUpOutlined, ArrowDownOutlined } from '@ant-design/icons'
import type { DisposalMetrics } from '../types'
import './MetricsCards.css'

interface MetricsCardsProps {
  metrics: DisposalMetrics
}

const MetricsCards: React.FC<MetricsCardsProps> = ({ metrics }) => {
  const getTrendIcon = (trend: string) => {
    const isUp = trend.startsWith('+')
    return isUp ? (
      <ArrowUpOutlined style={{ color: '#ff4d4f' }} />
    ) : (
      <ArrowDownOutlined style={{ color: '#52c41a' }} />
    )
  }

  const getTrendColor = (trend: string) => {
    const isUp = trend.startsWith('+')
    return isUp ? '#ff4d4f' : '#52c41a'
  }

  return (
    <Row gutter={16} className="metrics-cards">
      <Col xs={24} sm={8}>
        <Card className="metrics-card pending-card">
          <Statistic
            title="待处理脆弱性"
            value={metrics.pending}
            valueStyle={{ color: '#ff4d4f', fontSize: 32, fontWeight: 600 }}
            suffix={
              <span className="metrics-trend" style={{ color: getTrendColor(metrics.pendingTrend) }}>
                {getTrendIcon(metrics.pendingTrend)}
                <span style={{ fontSize: 14, marginLeft: 4 }}>{metrics.pendingTrend}</span>
              </span>
            }
          />
        </Card>
      </Col>

      <Col xs={24} sm={8}>
        <Card className="metrics-card processing-card">
          <Statistic
            title="处理中脆弱性"
            value={metrics.processing}
            valueStyle={{ color: '#1890ff', fontSize: 32, fontWeight: 600 }}
            suffix={
              <span className="metrics-trend" style={{ color: getTrendColor(metrics.processingTrend) }}>
                {getTrendIcon(metrics.processingTrend)}
                <span style={{ fontSize: 14, marginLeft: 4 }}>{metrics.processingTrend}</span>
              </span>
            }
          />
        </Card>
      </Col>

      <Col xs={24} sm={8}>
        <Card className="metrics-card completed-card">
          <Statistic
            title="本月完成数量"
            value={metrics.completedThisMonth}
            valueStyle={{ color: '#52c41a', fontSize: 32, fontWeight: 600 }}
            suffix={
              <span className="metrics-trend" style={{ color: getTrendColor(metrics.completedTrend) }}>
                {getTrendIcon(metrics.completedTrend)}
                <span style={{ fontSize: 14, marginLeft: 4 }}>{metrics.completedTrend}</span>
              </span>
            }
          />
        </Card>
      </Col>
    </Row>
  )
}

export default MetricsCards
