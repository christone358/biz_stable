import React, { useState } from 'react'
import { Tabs } from 'antd'
import Overview from './components/Overview'
import Management from './components/Management'
import './index.css'

const { TabPane } = Tabs

const VulnerabilityPage: React.FC = () => {
  const [activeTab, setActiveTab] = useState<'overview' | 'management'>('overview')
  const [managementFilter, setManagementFilter] = useState<any>(null)

  // 从总览页面切换到管理页面
  const handleSwitchToManagement = (filter?: any) => {
    setManagementFilter(filter)
    setActiveTab('management')
  }

  return (
    <div className="vulnerability-page">
      <Tabs
        activeKey={activeTab}
        onChange={(key) => setActiveTab(key as 'overview' | 'management')}
        size="large"
        type="line"
      >
        <TabPane tab="脆弱性总览" key="overview">
          <Overview onSwitchToManagement={handleSwitchToManagement} />
        </TabPane>
        <TabPane tab="脆弱性管理" key="management">
          <Management initialFilter={managementFilter} />
        </TabPane>
      </Tabs>
    </div>
  )
}

export default VulnerabilityPage
