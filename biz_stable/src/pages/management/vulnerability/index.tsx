import React, { useState } from 'react'
import { Tabs } from 'antd'
import type { TabsProps } from 'antd'
import Overview from './components/Overview'
import Management from './components/Management'
import './index.css'

const VulnerabilityPage: React.FC = () => {
  const [activeTab, setActiveTab] = useState<'overview' | 'management'>('overview')
  const [managementFilter, setManagementFilter] = useState<any>(null)

  // 从总览页面切换到管理页面
  const handleSwitchToManagement = (filter?: any) => {
    setManagementFilter(filter)
    setActiveTab('management')
  }

  const items: TabsProps['items'] = [
    {
      key: 'overview',
      label: '脆弱性总览',
      children: <Overview onSwitchToManagement={handleSwitchToManagement} />
    },
    {
      key: 'management',
      label: '脆弱性管理',
      children: <Management initialFilter={managementFilter} />
    }
  ]

  return (
    <div className="vulnerability-page">
      <Tabs
        activeKey={activeTab}
        onChange={(key) => setActiveTab(key as 'overview' | 'management')}
        size="large"
        type="line"
        items={items}
      />
    </div>
  )
}

export default VulnerabilityPage
